/// <reference types="./types/expect-webdriverio.d.ts"/>

// TODO dprevost try to type conditional the toMatchSnapshot later...
/*/// <reference types="@types/jest"/>*/

// type ChainablePromiseElement = ReturnType<WebdriverIO.Browser['$']>
// type WdioElementLike = WebdriverIO.Element | ChainablePromiseElement

declare namespace jest {

    interface Matchers<R, T> extends WdioMatchers<R, T>{

        /**
         * Below are overloaded Jest's matchers not part of `expect` but of `jest-snapshot`.
         * We need to define them below so that they are correctly typed overloaded
         * @see https://github.com/jestjs/jest/blob/73dbef5d2d3195a1e55fb254c54cce70d3036252/packages/jest-snapshot/src/types.ts#L37
         */

        /**
         * snapshot matcher
         * @param label optional snapshot label
         */
        toMatchSnapshot(label?: string): Promise<R>;

        // TODO - this is not working as expected, need to investigate
        /**
         * snapshot matcher
         * @param label optional snapshot label
         */
        // toMatchSnapshot: T extends WdioElementLike ? (label: string) => Promise<R> : (hint?: string) => R;

        /**
         * inline snapshot matcher
         * @param snapshot snapshot string (autogenerated if not specified)
         * @param label optional snapshot label
         */
        toMatchInlineSnapshot(snapshot?: string, label?: string): Promise<R>
    }

    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    interface Expect extends WdioMatchers<any> {}

    interface InverseAsymmetricMatchers extends Expect {}
}